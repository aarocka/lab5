<!DOCTYPE html>
<html>
    <head>
        <title>Javascript Cat Show</title>

        <!-- Following the CSS file naming convention, we put all the styles for the 
             slideShow into their own style sheet. In this style sheet, 
             every rule is prefixed by ".slidShow" (same name as css file name). 
             This "localizes" the styling so that it only applies to DOM elements 
             classed "slideShow".
             
             Basically, the Provider code is the Make function PLUS the associated 
             style sheet. The HTML coder can modify or override the slideShow styles 
             (as shown below). 
        --> 

        <link href="slideShow.css" rel="stylesheet" type="text/css" /> 

        <style> 

            /* in here, you would have the styling for the whole page -- 
               everything but the slide show.*/

            body {
                background-color:#707790;
            }

            /* example showing how the HTML coder can add to or override styles 
               from the slideShow style sheet. */
            .slideShow {
                padding: 1rem;
                background-color: lightblue;
            }

        </style>

    </head>
    <body>
        <h2 style="text-align:center">Test that both components work independently</h2>

        <div id="content">
        </div>

        <script src="MakeSlideShow.js"></script>
        <script src="ajax.js"></script>

        <script>

            "use strict";
            //create first slideshow object
            /*
            var myPicList = [
                {fileName:"http://cis-linux2.temple.edu/~sallyk/pics_cat/pic1.png", caption:"test blahaj0"},
                {fileName:"http://cis-linux2.temple.edu/~sallyk/pics_cat/pic2.png", caption:"test blahaj1"},
                {fileName:"http://cis-linux2.temple.edu/~sallyk/pics_cat/pic3.png", caption:"test blahaj2"},
                {fileName:"http://cis-linux2.temple.edu/~sallyk/pics_cat/pic4.png", caption:"test blahaj3"},
                {fileName:"http://cis-linux2.temple.edu/~sallyk/pics_cat/pic5.png", caption:"test blahaj4"},
                {fileName:"http://cis-linux2.temple.edu/~sallyk/pics_cat/pic6.png", caption:"test blahaj5"}
            ];
            */

            //image list from ajax call            

            // Create a DOM element (div) like a CGF would do. 
            var ele = document.createElement("div");
            
            // style ele as a flex box and place two divs in that flex box
            // (each 50% wide). Each of these divs will hold one slide show.

            ele.innerHTML = `
              <style>
                .ssFlex {
                  display:flex;
                  flex-direction:row;
                }
                .ssFlex .ssHolder {
                  width: 50%;
                  box-sizing:border-box;
                  text-align:center;
                }
              </style>
              <div class="firstDiv ssHolder">
                <h2>First SlideShow</h2>
              </div>
              <div class="secondDiv ssHolder">
                <h2>Second SlideShow</h2>
              </div>
            `;

            ele.classList.add("ssFlex"); // must style ele as ssFlex to pick up the 
            // above styling.

            // Get a reference to the two divs into which you want to place 
            // slide show components. 
            var firstDiv = ele.getElementsByClassName("firstDiv")[0];
            var secondDiv = ele.getElementsByClassName("secondDiv")[0];

            // Shows how an ajax error is handled -- you'll see an error 
            // message on the page. waterFunnn.json is mispelled.
            ajax("cars.json", processFunList, firstDiv);
            function processFunList(funList) {
                // MakeSlideShow expects a property called "image", so provide that... 
                for (var i = 0; i < funList.length; i++) {
                    funList[i].pic = funList[i].photo;
                    funList[i].caption = funList[i].make;
                    console.log("image " + i + " " + funList[i].image);
                }

                console.log("funList after setting image properties");
                console.log(funList);

                var ss = MakeSlideShow(funList, "slideShow");
                document.getElementById("content").appendChild(ss);

                // Example showing why you need to get the ss reference, so the HTML page can invoke 
                // any public methods that may be available from the returned slide show object.
                ss.setPicNum(1);
            }












            //var ss1 = MakeSlideShow(myPicList, "slideShow");
            //document.getElementById("content").appendChild(ss1);

            // Example showing why you need to get the ss reference, so the HTML page can invoke 
            // any public methods that may be available from the returned slide show object.
            //ss1.setPicNum(3); // sets array index to 3, if 3 is in bounds for the array.

            // create second slideshow object
            /*
            var otherPicList =[ 
                {fileName:"http://cis-linux2.temple.edu/~sallyk/pics_cat/pic10.png", caption:"test blahaj6"},
                {fileName:"http://cis-linux2.temple.edu/~sallyk/pics_cat/pic11.png", caption:"test blahaj7"},
                {fileName:"http://cis-linux2.temple.edu/~sallyk/pics_cat/pic13.png", caption:"test blahaj8"},
                {fileName:"http://cis-linux2.temple.edu/~sallyk/pics_cat/pic14.png", caption:"test blahaj9"},
                {fileName:"http://cis-linux2.temple.edu/~sallyk/pics_cat/pic15.png", caption:"test blahaj10"}
            ];
            */
            //var ss2 = MakeSlideShow(otherPicList, "slideShow");
            //document.getElementById("content").appendChild(ss2);


        </script>
    </body>
</html>